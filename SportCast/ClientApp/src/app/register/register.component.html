<div class="shell">
  <div class="ambient" aria-hidden="true">
    <div class="orb-field">
      <span class="orb orb-1"></span>
      <span class="orb orb-2"></span>
      <span class="orb orb-3"></span>
    </div>
  </div>
  <div class="card">
    <div class="logo">
      <img src="assets/ESPN_wordmark.svg.png" alt="SportCast logo" />
      <span>SportCast</span>
    </div>
    <h1>Create your account</h1>
    <p class="muted">Join the sandbox and start exploring</p>

    <div class="guide">
      <span class="muted">Tell us about you</span>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()" novalidate class="two-col-form">
      <label>
        First Name
        <div class="input-shell">
          <input type="text" formControlName="firstname" placeholder="Jane" />
        </div>
        <span class="error" *ngIf="form.controls.firstname.touched && form.controls.firstname.invalid">
          Enter at least 2 characters.
        </span>
      </label>

      <label>
        Last Name
        <div class="input-shell">
          <input type="text" formControlName="lastname" placeholder="Doe" />
        </div>
        <span class="error" *ngIf="form.controls.lastname.touched && form.controls.lastname.invalid">
          Enter at least 2 characters.
        </span>
      </label>

      <label>
        Date of Birth
        <div class="date-picker-shell">
          <button
            type="button"
            class="date-visual"
            (click)="openDatePicker(dobInput)"
            (keydown.enter)="openDatePicker(dobInput)"
            (keydown.space)="openDatePicker(dobInput); $event.preventDefault()"
            role="button"
            aria-haspopup="dialog"
            aria-label="Date of Birth"
          >
            <span class="date-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" focusable="false">
                <rect x="4" y="5" width="16" height="15" rx="3" ry="3"></rect>
                <line x1="9" y1="3" x2="9" y2="7"></line>
                <line x1="15" y1="3" x2="15" y2="7"></line>
                <line x1="4" y1="11" x2="20" y2="11"></line>
              </svg>
            </span>
            <span class="date-value" *ngIf="form.controls.dateOfBirth.value; else dobPlaceholder">
              {{ form.controls.dateOfBirth.value | date: 'MM/dd/yyyy' }}
            </span>
            <ng-template #dobPlaceholder>
              <span class="date-placeholder">mm/dd/yyyy</span>
            </ng-template>
          </button>
          <input
            #dobInput
            class="native-date"
            type="date"
            formControlName="dateOfBirth"
            [max]="today"
            aria-label="Date of Birth"
          />
        </div>
        <span class="error" *ngIf="form.controls.dateOfBirth.touched && form.controls.dateOfBirth.invalid">
          Enter a valid date.
        </span>
      </label>

      <label>
        Email
        <div class="input-shell">
          <input type="email" formControlName="email" placeholder="you@example.com" />
        </div>
        <span class="error" *ngIf="form.controls.email.touched && form.controls.email.invalid">
          Enter a valid Email.
        </span>
      </label>

      <div class="hint-row full-span">
        <span class="hint">Use your birth date (cannot be in the future).</span>
      </div>

      <label>
        Password
        <div class="input-shell">
          <input type="password" formControlName="password" placeholder="********" />
        </div>
        <span class="error" *ngIf="form.controls.password.touched && form.controls.password.invalid">
          Minimum 6 Characters.
        </span>
      </label>

      <div class="form-note full-span">
        <span class="pill soft">Tips</span>
        <ul>
          <li>For your password, use 6+ characters with a mix of letters and numbers.</li>
          <li>This account lets you access the SportCast sandbox.</li>
        </ul>
      </div>

      <button type="submit" [disabled]="loading" class="full-span">
        {{ loading ? 'Creating account...' : 'Create Account' }}
      </button>
    </form>

    <div class="secondary-action">
      <span>Already have an account?</span>
      <a routerLink="/login">Sign in</a>
    </div>

    <div class="alert error" *ngIf="error">{{ error }}</div>
    <div class="alert success" *ngIf="success">{{ success }}</div>
  </div>
</div>
